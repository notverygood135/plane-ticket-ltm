<!DOCTYPE html>
<html>
    <body>
        <link rel="stylesheet" href="../static/login.css">
        <h1>LOGIN</h1>
        <input class="info" type="text" name="username" id="username" placeholder="Username">
        <input class="info" type="password" name="password" id="password" placeholder="Password"><br>
        <button class="confirm" type="button" onclick="submit()">Submit</button>
        <script>
            function submit() {
                let username = document.getElementById("username").value;
                let password = document.getElementById("password").value;
                console.log(`username: ${username}, password: ${password}`);
                fetch("/login", {
                    method: "POST",
                    headers: {
                        "Content-Type": "text/html"
                    },
                    body: `username=${username}&password=${password}`
                })
                .then(response => {
                    return(response.text());
                })
                .then(data => {
                    data = data.slice(0, -4)
                    if (data != "NOT OK") {
                        window.location.replace("http://localhost:8001");
                        localStorage.setItem("username", data);
                    }
                    else {
                        alert("Invalid username or password");
                    }
                })
            }
        </script>
    </body>
</html>